!function(){var e,n,m=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},x=[].slice;e=window,n=function(l,r){var e,o,s,c,n,u,f,i,a,h,d,p,y,v,w,g;function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+n++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[u]=this.id,f[this.id]=this,t.bind(p,function(){if(!e.didScroll&&!i)return e.didScroll=!0,r.setTimeout(function(){return e.doScroll(),e.didScroll=!1},l[g].settings.scrollThrottle)}),t.bind(d,function(){if(!e.didResize)return e.didResize=!0,r.setTimeout(function(){return l[g]("refresh"),e.didResize=!1},l[g].settings.resizeThrottle)})}function S(t,e,n){"bottom-in-view"===n.offset&&(n.offset=function(){var t=l[g]("viewportHeight");return(t=l.isWindow(e.element)?t:e.$element.height())-l(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=e,this.enabled=n.enabled,this.id="waypoints"+y++,this.offset=null,this.options=n,e.waypoints[this.axis][this.id]=this,(n=null!=(t=(c[this.axis][this.id]=this).element[v])?t:[]).push(this.id),this.element[v]=n}return e=l(r),i=0<=m.call(r,"ontouchstart"),c={horizontal:{},vertical:{}},f={},u="waypoints-context-id",d="resize.waypoints",p="scroll.waypoints",y=n=1,v="waypoints-waypoint-ids",w="waypoint",g="waypoints",t.prototype.doScroll=function(){var r=this,t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};return!i||t.vertical.oldScroll&&t.vertical.newScroll||l[g]("refresh"),l.each(t,function(t,i){var o=[],e=i.newScroll>i.oldScroll,n=e?i.forward:i.backward;return l.each(r.waypoints[t],function(t,e){var n;return i.oldScroll<(n=e.offset)&&n<=i.newScroll||i.newScroll<(n=e.offset)&&n<=i.oldScroll?o.push(e):void 0}),o.sort(function(t,e){return t.offset-e.offset}),e||o.reverse(),l.each(o,function(t,e){if(e.options.continuous||t===o.length-1)return e.trigger([n])})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var e=this,t=l.isWindow(this.element),n=this.$element.offset();return this.doScroll(),n={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:t?l[g]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},l.each(n,function(t,r){return l.each(e.waypoints[t],function(t,e){var n=e.options.offset,i=e.offset,o=l.isWindow(e.element)?0:e.$element.offset()[r.offsetProp];if(l.isFunction(n)?n=n.apply(e.element):"string"==typeof n&&(n=parseFloat(n),-1<e.options.offset.indexOf("%")&&(n=Math.ceil(r.contextDimension*n/100))),e.offset=o-r.contextOffset+r.contextScroll-n,(!e.options.onlyOnScroll||null==i)&&e.enabled)return null!==i&&i<(o=r.oldScroll)&&o<=e.offset?e.trigger([r.backward]):null!==i&&i>(n=r.oldScroll)&&n>=e.offset||null===i&&r.oldScroll>=e.offset?e.trigger([r.forward]):void 0})})},t.prototype.checkEmpty=function(){if(l.isEmptyObject(this.waypoints.horizontal)&&l.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([d,p].join(" ")),delete f[this.id]},o=t,S.prototype.trigger=function(t){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0},S.prototype.disable=function(){return this.enabled=!1},S.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},S.prototype.destroy=function(){return delete c[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},S.getWaypointsByElement=function(t){var e,t=t[v];return t?(e=l.extend({},c.horizontal,c.vertical),l.map(t,function(t){return e[t]})):[]},s=S,h={init:function(t,i){return null==(i=l.extend({},l.fn[w].defaults,i)).handler&&(i.handler=t),this.each(function(){var t,e=l(this),n=null!=(n=i.context)?n:l.fn[w].defaults.context;return l.isWindow(n)||(n=e.closest(n)),n=l(n),t=(t=f[n[0][u]])||new o(n),new s(e,t,i)}),l[g]("refresh"),this},disable:function(){return h._invoke.call(this,"disable")},enable:function(){return h._invoke.call(this,"enable")},destroy:function(){return h._invoke.call(this,"destroy")},prev:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){if(0<e)return t.push(n[e-1])})},next:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){if(e<n.length-1)return t.push(n[e+1])})},_traverse:function(e,t,n){var i,o;return null==e&&(e="vertical"),o=a.aggregate(t=null==t?r:t),i=[],this.each(function(){var t=l.inArray(this,o[e]);return n(i,t,o[e])}),this.pushStack(i)},_invoke:function(n){return this.each(function(){var t=s.getWaypointsByElement(this);return l.each(t,function(t,e){return e[n](),!0})}),this}},l.fn[w]=function(){var t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[];return h[t]?h[t].apply(this,e):l.isFunction(t)?h.init.apply(this,arguments):l.isPlainObject(t)?h.init.apply(this,[null,t]):t?l.error("The "+t+" method does not exist in jQuery Waypoints."):l.error("jQuery Waypoints needs a callback function or handler option.")},l.fn[w].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},a={refresh:function(){return l.each(f,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=r.innerHeight)?t:e.height()},aggregate:function(t){var e,i=c;return(i=t?null!=(t=f[l(t)[0][u]])?t.waypoints:void 0:i)?(e={horizontal:[],vertical:[]},l.each(e,function(t,n){return l.each(i[t],function(t,e){return n.push(e)}),n.sort(function(t,e){return t.offset-e.offset}),e[t]=l.map(n,function(t){return t.element}),e[t]=l.unique(e[t])}),e):[]},above:function(t){return a._filter(t=null==t?r:t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return a._filter(t=null==t?r:t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return a._filter(t=null==t?r:t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return a._filter(t=null==t?r:t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return a._invoke("enable")},disable:function(){return a._invoke("disable")},destroy:function(){return a._invoke("destroy")},extendFn:function(t,e){return h[t]=e},_invoke:function(n){var t=l.extend({},c.vertical,c.horizontal);return l.each(t,function(t,e){return e[n](),!0})},_filter:function(t,e,n){var i,o=f[l(t)[0][u]];return o?(i=[],l.each(o.waypoints[e],function(t,e){if(n(o,e))return i.push(e)}),i.sort(function(t,e){return t.offset-e.offset}),l.map(i,function(t){return t.element})):[]}},l[g]=function(){var t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[];return a[t]?a[t].apply(null,e):a.aggregate.call(null,t)},l[g].settings={resizeThrottle:100,scrollThrottle:30},e.on("load.waypoints",function(){return l[g]("refresh")})},"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(t){return n(t,e)}):n(e.jQuery,e)}.call(this);